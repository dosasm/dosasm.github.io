<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.4">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="DOSASM Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="DOSASM Blog Atom Feed">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">第九章 串口通信 | DOSASM</title><meta data-react-helmet="true" property="og:url" content="https://dosasm.github.io/docs/notes-njupt/串口通信"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="第九章 串口通信 | DOSASM"><meta data-react-helmet="true" name="description" content="9.1 串行通信基础"><meta data-react-helmet="true" property="og:description" content="9.1 串行通信基础"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://dosasm.github.io/docs/notes-njupt/串口通信"><link data-react-helmet="true" rel="alternate" href="https://dosasm.github.io/docs/notes-njupt/串口通信" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dosasm.github.io/docs/notes-njupt/串口通信" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.d9bfc96a.css">
<link rel="preload" href="/assets/js/runtime~main.f51745b1.js" as="script">
<link rel="preload" href="/assets/js/main.a9ff3313.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/dosboxasm.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/dosboxasm.svg" alt="My Site Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">DosAsm</b></a><a class="navbar__item navbar__link navbar__link--active" href="/docs/intro">Tutorial</a><a class="navbar__item navbar__link navbar__link--active" href="/docs/reference">Reference</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://dosasm.gitee.io/dosrun" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>PlayGround<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a href="https://github.com/dosasm/dosasm" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_3Zt9 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><button class="clean-btn backToTopButton_35hR" type="button" title="Scroll to top"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/intro">DosAsm</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">工具</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">工具-更多</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/reference">参考</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#">参考信息</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">参考-微机原理与接口技术</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/总览">目录</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/微型计算机基础">第1章 微型计算机基础</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/2_80x86微处理器">第二章 80x86微处理器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/汇编语言指令集">第三章 汇编语言指令集</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/汇编语言程序设计">第四章 汇编语言程序</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/输入输出系统">第七章 输入/输出系统</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/中断系统">第八章 中断系统</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/notes-njupt/串口通信">第九章 串口通信</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/并行IO接口">第十章 并行I/O 接口</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/可编程定时计数器">可编程定时器/计数器</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/8250可编程串行异步通信接口芯片">可编程串行异步通信接口芯片**8250**</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/notes-njupt/题目">题目</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="tocCollapsible_1PrD tocMobile_3Hoh"><button type="button" class="clean-btn tocCollapsibleButton_2O1e">On this page</button></div><div class="markdown"><header><h1 class="h1Heading_27L5">第九章 串口通信</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="91-串行通信基础"></a>9.1 串行通信基础<a class="hash-link" href="#91-串行通信基础" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="一、计算机通信方式"></a>一、计算机通信方式<a class="hash-link" href="#一、计算机通信方式" title="Direct link to heading">#</a></h3><p>CPU与外部的信息交换称为通信</p><ul><li>并行通信：数据所有位同时被传输</li><li>串行通信：数据被逐位顺序传送<ul><li>串行异步通信：指一帧字符用起始位和停止位来完成</li><li>串行同步通信：靠同步字符来完成收发双方同步</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="数据传送速度"></a>数据传送速度<a class="hash-link" href="#数据传送速度" title="Direct link to heading">#</a></h4><p>并行通信&gt;串行同步通信&gt;串行异步通信
<em>同步通信指的是发送端与接收端的时钟同步</em></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="二、串行数据传输方式"></a>二、串行数据传输方式<a class="hash-link" href="#二、串行数据传输方式" title="Direct link to heading">#</a></h3><p>（远程）串行数据通信系统模型</p><div class="mermaid">graph LR
computer[计算机]---|数字信道|MODEM1
MODEM1===|模拟信道 信道&lt;传输线路&gt;|MODEM2---|数字信道|terminal</div><p>对一个通信系统来讲，必须要考虑的问题有以下几个方面：</p><ol><li>信道的带宽和数据的传输速率</li><li>信号的调制与解调</li><li>串行通信的信号格式 等</li></ol><p>数据的传输方式</p><ol><li>单工方式:只允许数据按照一个固定的方向传送</li><li>半双工方式：要求收发双方均具备接受和发送数据的能力，由于只有一条信道，数据不能同时在两个方向上传送</li><li>全双工方式：在全双工方式中，收发双方可同时进行数据传送（至少两根线）</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="串行异步通信协议"></a>串行异步通信协议<a class="hash-link" href="#串行异步通信协议" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="标准数据格式"></a>标准数据格式<a class="hash-link" href="#标准数据格式" title="Direct link to heading">#</a></h4><table><thead><tr><th>起始位</th><th>数据位</th><th>奇偶校验位</th><th>停止位</th></tr></thead><tbody><tr><td>1位</td><td>5~8位</td><td>0~1位</td><td>1、1.5、2 位</td></tr><tr><td>逻辑‘0’</td><td>0,1代码</td><td>0或1</td><td>逻辑‘1’</td></tr></tbody></table><p><strong>注</strong>：</p><ul><li>数据位<strong>先发低字节</strong></li><li>奇偶校验位（可有可无）：通信双方约定采用一致的奇偶校验方式，由发送方设置校验位，由接受方负责校验<ul><li>奇校验：数据位与校验位中&#x27;1&#x27;的个数为奇数</li><li>偶校验：数据位与校验位中&#x27;1&#x27;的个数为偶数</li></ul></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="一帧数据发送时序"></a>一帧数据发送时序<a class="hash-link" href="#一帧数据发送时序" title="Direct link to heading">#</a></h4><p>异步通信时，
一帧字符以<strong>起始位</strong>&#x27;0&#x27;开始，紧跟着是<strong>数据位</strong>(先发数据最低位，再是高位)<strong>奇偶校验位</strong>，最后以<strong>停止位</strong>结束(停止位可以是1位、1.5位或者2位的逻辑1信号)。无数据传送时，通信线长时间逻辑&#x27;1&#x27;。</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="通信速率传输速率"></a>通信速率(传输速率)<a class="hash-link" href="#通信速率传输速率" title="Direct link to heading">#</a></h4><p>通信速率，又称波特率，表示每秒钟传送的0、1代码个数(包括起始位、校验位、停止位)，单位为“波特”。
(bite  per  second—— bps)——  <sup id="fnref-波特率"><a href="#fn-波特率" class="footnote-ref">波特率</a></sup>
<sup id="fnref-波特率"><a href="#fn-波特率" class="footnote-ref">波特率</a></sup>:注：本书中的信号传输是使用二进制信号进行的，此处的波特率(数据信号速率)也指比特率(数据通信速率)。
异步通信传送中，收发双方必须约定：</p><ul><li>收发双方的<strong>通信速率</strong>必须一致</li><li>收发双方的<strong>数据帧格式</strong>必须一致</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="信号的调制与解调（了解）"></a>信号的调制与解调（了解）<a class="hash-link" href="#信号的调制与解调（了解）" title="Direct link to heading">#</a></h4><ul><li>调制：用一个信号控制另一个信号的某个参数随之变化的过程，叫调制。<br>这两个信号分别叫调制信号和被调信号，被调信号只作为传输过程中信息的载体，也叫载波。</li><li>解调： 将已经调制的信号恢复成原来的数字信号的过程。</li></ul><p>通常情况下，通信是双向的，调制器和解调器设置在同一个装置中，称为调制解调器(MODEM,猫，ADSL )。这个设备在远距离通信中具有重要作用！</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rs232c标准串行通信接口标准"></a>RS232C标准——串行通信接口标准<a class="hash-link" href="#rs232c标准串行通信接口标准" title="Direct link to heading">#</a></h4><blockquote><p>要进行串行通信，还要解决一个问题：计算机与MODEM怎样连接？         —— 通过接口电路——串行接口电路  连接。
这个接口其： 机械特性、电气特性、功能特性 都要遵循一定的规范，也就是要有一个标准。</p></blockquote><p>目前计算机通信使用最普遍的是RS-232C标准。它对两方面作了规定：信号的电平标准和控制信号的定义。
<img alt="image-20200510140021245" src="/assets/images/image-20200510140021245-7c2cd734ddc2c19256b5383cb0774bdb.png"></p><ol><li>控制信号的定义(机械特性)早期的PC系列机一般有两个串行口：即COM1和COM2，使用9针和25针两种连接器，符合RS-232C接口标准。
RS-232C使用25芯连接器和9芯连接器</li></ol><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="25针连接器中通信中常用的9个端子"></a>25针连接器中通信中常用的9个端子<a class="hash-link" href="#25针连接器中通信中常用的9个端子" title="Direct link to heading">#</a></h5><table><thead><tr><th>25针连接器端子号</th><th>名称</th><th>方向(从微机出发)</th><th>功能</th></tr></thead><tbody><tr><td><em>2</em></td><td>TXD</td><td>输出(DTE→DCE)</td><td>发送数据(Transmit Data)</td></tr><tr><td><em>3</em></td><td>RXD</td><td>输入(DCE→DTE)</td><td>接收数据(Receive Data)</td></tr><tr><td>4</td><td>RTS</td><td>输出(DTE→DCE)</td><td>请求发送(Request To Send)</td></tr><tr><td>5</td><td>CTS</td><td>输入(DCE→DTE)</td><td>允许发送(Clear To Send)</td></tr><tr><td>6</td><td>DSR</td><td>输入(DCE→DTE)</td><td>数据设备准备好(Data Set Ready)</td></tr><tr><td><em>7</em></td><td>GND/SG</td><td></td><td>信号地(Signal  Ground)</td></tr><tr><td>8</td><td>DCD</td><td>输入(DCE→DTE)</td><td>载波检测(Carrier DeteCt)</td></tr><tr><td>20</td><td>DTR</td><td>输出(DTE→DCE)</td><td>数据终端准备好(Data Term Ready)</td></tr><tr><td>22</td><td>RI</td><td>输入(DCE→DTE)</td><td>振铃指示(Ring Indicator)</td></tr></tbody></table><h5><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="信号电平标准（电器特性）"></a>信号电平标准（电器特性）<a class="hash-link" href="#信号电平标准（电器特性）" title="Direct link to heading">#</a></h5><p>标准规定：</p><ul><li>逻辑“1”信号，电平在 –3V ~ -15V 之间；</li><li>逻辑“0”信号，电平在 +3V ~ +15V 之间；
因此，使用RS-232C与微机接口时，需要将TTL电平<sup id="fnref-ttl"><a href="#fn-ttl" class="footnote-ref">TTL</a></sup> (0 ~ 5V)与RS-232C电平进行转换。</li></ul><p><img alt="image-20200510150107691" src="/assets/images/image-20200510150107691-945b13365bc8f57d7b765e6484d8e5dd.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="92-可编程串行异步通信接口芯片8250"></a>9.2 可编程串行异步通信接口芯片8250<a class="hash-link" href="#92-可编程串行异步通信接口芯片8250" title="Direct link to heading">#</a></h2><p>详细见：<a href="/docs/notes-njupt/8250可编程串行异步通信接口芯片">可编程串行异步通信接口芯片8250</a></p><ul><li><p>能实现数据串<span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⇔</mo></mrow><annotation encoding="application/x-tex">\Leftrightarrow</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.36687em;vertical-align:0em"></span><span class="mrel">⇔</span></span></span></span></span>并变换，实现全双工异步通信支</p></li><li><p>持异步通信协议，数据格式、通信速率等由初始化编程设定</p></li><li><p>内部有MODEM控制器，可直接和MODEM相连</p></li><li><p>内部有中断机制，CPU可用查询、中断方式与之交换信息</p></li><li><p>以Ins 8250为核心器件的微机串行口，基于RS-232C标准，微机之间既通过连接调制解调器实现通过电话线路的远距离通信，也可以</p></li><li><p>直接连接进行短距离的点到点通信。</p><p>PC机有2个串行口，端口I/O地址分别为主串口<code>3FXH</code>、辅串口<code>2FXH</code>（高档微机中，8250的功能被一些多功能芯片取代）</p></li></ul><p><img alt="image-20200510151557552" src="/assets/images/image-20200510151557552-3a1a80eb228fb541ce3b119316ec4ae4.png"></p><ul><li><p><strong>串行数据发送过程：</strong>CPU执行OUT指令，将待发送的数据→发送保持寄存器暂存，当发送移位寄存器空闲时自动装入，后者在发送器时钟控制下将并行数据添加起始位、校验位、停止位，一位一位发出。</p></li><li><p><strong>串行数据接收过程：</strong>在接收器时钟控制下，接收移位寄存器一位一位地接收串行数据，自动的去掉起始位、校验位、停止位，并转换成并行数据→接收缓冲寄存器暂存，在接收过程中对一帧数据自动进行校验。</p></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="内部结构"></a>内部结构<a class="hash-link" href="#内部结构" title="Direct link to heading">#</a></h3><p><img alt="image-20200510151920575" src="/assets/images/image-20200510151920575-6c563f6bfff894843d3d43c59645e7c1.png"></p><p><em>TIP</em>:寄存器不一定有口地址，口地址一样的寄存器不一定是同一个寄存器，口地址相同不会同时访问两个寄存器</p><ol><li><p><strong>发送保持寄存器</strong>(3F8H/2F8H)
该寄存器保存CPU传送来的并行数据，并转移至发送移位寄存器
注：只有在发送保持寄存器空闲时，CPU才能写入下一个数据。</p></li><li><p><strong>接收缓冲寄存器</strong>(3F8H/2F8H)
接收移位寄存器，去掉起始位，校验位和停止位，转换成并行数据，转换后的并行数据存入接收缓冲寄存器，等待CPU接收。
注：只有当一帧数据收完后，CPU才能用IN指令读接收缓冲寄存器</p></li><li><p><strong>通信线状态寄存器</strong>(3FDH/2FDH)：D0与D5最重要，D1到D5之间的是</p></li></ol><ul><li><p><strong>D0位</strong>：接收数据准备好(接收缓冲器满)标志位。 D0＝1，表示接收器已接收到一帧完整的数据，并已转换成并行数据，存入接收缓冲寄存器。(CPU接收数据时一定要查询)</p></li><li><p><strong>D5位</strong>：<strong><em>发送保持寄存器</em></strong>空闲标志位。D5＝1，表示数据已从发送保持寄存器转移到发送移位寄存器，发送保持寄存器空闲，CPU可以写入新数据。当新数据送入发送保持寄存器后， D5置0。</p></li><li><p>D7位：恒为0。</p><p>注意：D0位(接收数据准备好)和D5位(发送保持寄存器空)是串行接口最基本的标志位，它们决定了CPU能不能向8250进行读写操作，只有当D0＝1时，CPU才能读数；只有当D5=1或D6=1时，CPU才能写数据。</p></li></ul><ol start="4"><li>中断允许寄存器（3F9H/2F9H)</li><li>中断识别寄存器（3FAH/2FAH)</li><li>MODEM控制寄存器（3FCH/2FCH）</li><li>除数寄存器( 高8位3F9H/2F9H ，低8位3F8H/2F8H )</li><li>通信线控制寄存器（3FBH/2FBH）</li><li>MODEM状态寄存器（3FEH/2FEH）</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="93-8250初始化编程"></a>9.3 8250初始化编程<a class="hash-link" href="#93-8250初始化编程" title="Direct link to heading">#</a></h2><ul><li>直接对8250端口操作</li><li>利用BIOS通信软件(INT 14H)<em>（了解）</em></li></ul><p>直接对8250端口进行 初始化编程 步骤：</p><ol><li><p>确定波特率 ——  设置除数锁存器<code>3FBH</code> ；<strong>9行</strong></p></li><li><p>确定数据格式 —— 设置通信线路控制寄存器；<strong>3行</strong></p></li><li><p>确定是否使用中断方式 —— 若使用，需设置中断允许寄存器的相应位置“1”，否则对应位置“0”；<strong>3行</strong></p></li><li><p>设置MODEM 控制寄存器   <strong>3行</strong></p></li></ol><p><img alt="image-20200510224642299" src="/assets/images/image-20200510224642299-ea4ac114857a501229fb3e8b4453af55.png"></p><p><em>子程序一定要有ret</em></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly assembly"><pre tabindex="0" class="prism-code language-assembly codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">I8250    PROC</span></span><span class="token-line" style="color:#393A34"><span class="token plain">;除数锁存器（分频系数）</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       DX，3FBH;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       AL，80H</span></span><span class="token-line" style="color:#393A34"><span class="token plain">OUT        DX，AL;通讯线路控制寄存器最高位置“1”</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       DX，3F9H;D7设置</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       AL，0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">OUT        DX，AL;除数低位送入 除数锁存器 LSB (低8位)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       DX，3F8H</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       AL，60H</span></span><span class="token-line" style="color:#393A34"><span class="token plain">OUT        DX，AL;除数高位送入 除数锁存器 MSB (高8位)</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       DX，3FBH;定义数据帧格式</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       AL，03H</span></span><span class="token-line" style="color:#393A34"><span class="token plain">OUT        DX，AL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       DX，3F9H;中断允许寄存器</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       AL，0</span></span><span class="token-line" style="color:#393A34"><span class="token plain">OUT        DX，AL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       DX，3FCH;MODERM控制寄存器</span></span><span class="token-line" style="color:#393A34"><span class="token plain">MOV       AL，10H</span></span><span class="token-line" style="color:#393A34"><span class="token plain">OUT        DX，AL</span></span><span class="token-line" style="color:#393A34"><span class="token plain">RET</span></span><span class="token-line" style="color:#393A34"><span class="token plain">I8250  ENDP</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="94-串行通信的外部环境"></a>9.4 串行通信的外部环境<a class="hash-link" href="#94-串行通信的外部环境" title="Direct link to heading">#</a></h2><ol><li>短距离（无MODEM）点——点全双工通信<img alt="image-20200510230219921" src="/assets/images/image-20200510230219921-b7676f5b96fdbabda5512dd28685053e.png"></li><li>短距离单工通信<img alt="image-20200510230335707" src="/assets/images/image-20200510230335707-61b7099a32a653d31815f2cc3c670bf9.png"></li><li>外环自发/自收<img alt="image-20200510230427664" src="/assets/images/image-20200510230427664-81f0a2c8a3743dc3b387bb82cace61ce.png"></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="95-串行通信程序设计举例"></a>9.5 串行通信程序设计举例<a class="hash-link" href="#95-串行通信程序设计举例" title="Direct link to heading">#</a></h2><p>设计时需要考虑：</p><p>① 题型：单端自发自收，点—点通信(全双工、单工)</p><p>② CPU与串口交换信息的方式：查询？中断？</p><p>③ 编程手段：对端口直接编程？调用BIOS通信软件</p><p>④ 根据题目要求组织相应的外部环境</p><ol><li><p>对端口直接操作发送和接收数据，
程序中查询联络线,可以按“有联络线”方式接线
程序中不查询联络线，可以按“无联络线”方式接线</p></li><li><p>BIOS通信软件是一个全双工的通信软件，发送和接收之前都要使用联络线与对端“握手”，只有联络畅通，才能发送或接收数据！</p></li><li><p>当8250设置为内环自检方式的时候，只能采用查询方式，而且只能采用对端口直接操作的编程手段，完成数据的发送和接收。</p></li></ol><div class="footnotes"><hr><ol><li id="fn-ttl">注：计算机处理器中数据表示采用二进制规定，+5V等价于逻辑“1”，0V等价于逻辑“0”，这被称做TTL(晶体管-晶体管逻辑电平)信号系统，这是计算机处理器控制的设备内部各部分之间通信的标准技术。<a href="#fnref-ttl" class="footnote-backref">↩</a></li></ol></div></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/dosasm/dosasm/edit/docusaurus/docs/notes-njupt/9_串口通信.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/notes-njupt/中断系统"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« 第八章 中断系统</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/notes-njupt/并行IO接口"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">第十章 并行I/O 接口 »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#91-串行通信基础" class="table-of-contents__link">9.1 串行通信基础</a><ul><li><a href="#一、计算机通信方式" class="table-of-contents__link">一、计算机通信方式</a></li><li><a href="#二、串行数据传输方式" class="table-of-contents__link">二、串行数据传输方式</a></li><li><a href="#串行异步通信协议" class="table-of-contents__link">串行异步通信协议</a></li></ul></li><li><a href="#92-可编程串行异步通信接口芯片8250" class="table-of-contents__link">9.2 可编程串行异步通信接口芯片8250</a><ul><li><a href="#内部结构" class="table-of-contents__link">内部结构</a></li></ul></li><li><a href="#93-8250初始化编程" class="table-of-contents__link">9.3 8250初始化编程</a></li><li><a href="#94-串行通信的外部环境" class="table-of-contents__link">9.4 串行通信的外部环境</a></li><li><a href="#95-串行通信程序设计举例" class="table-of-contents__link">9.5 串行通信程序设计举例</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/reference">References</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/dosasm" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://gitee.com/dosasm/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Gitee<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Docusaurus<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://js-dos.com" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Js-Dos<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2021 DosAsm Project. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.f51745b1.js"></script>
<script src="/assets/js/main.a9ff3313.js"></script>
</body>
</html>